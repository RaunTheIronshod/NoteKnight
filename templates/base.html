{% load static %} {% load form_tags %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>NoteKnight</title>

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    </head>

    <body>
        <!-- Header -->
        <header class="mb-4">
            <div
                class="container d-flex flex-column flex-md-row justify-content-between align-items-center"
            >
                <h1 class="mb-3 mb-md-0">NoteKnight</h1>

                <!-- Navigation -->
                <nav aria-label="Main Navigation">
                    <ul class="nav flex-column flex-md-row align-items-center">
                        <li class="nav-item me-md-3">
                            <a class="nav-link" href="{% url 'note_list' %}"
                                >Notes</a
                            >
                        </li>

                        {% if user.is_authenticated %}
                        <li class="nav-item me-md-3">
                            <a class="nav-link" href="{% url 'logout' %}"
                                >Logout</a
                            >
                        </li>
                        {% else %}
                        <li class="nav-item me-md-3">
                            <a class="nav-link" href="{% url 'login' %}"
                                >Login</a
                            >
                        </li>
                        <li class="nav-item me-md-3">
                            <a class="nav-link" href="{% url 'register' %}"
                                >Register</a
                            >
                        </li>
                        {% endif %} {% if request.user.is_authenticated and
                        request.user.userprofile.role == "admin" %}
                        <li class="nav-item">
                            <a
                                class="btn btn-warning nav-link"
                                href="{% url 'admin_dashboard' %}"
                                >Admin Dashboard</a
                            >
                        </li>
                        {% endif %}

                        <!-- User Badge -->
                        <li class="nav-item ms-md-3 mt-2 mt-md-0">
                            {% if user.is_authenticated %}
                            <span
                                class="user-badge {% if user.is_superuser %}admin{% else %}regular{% endif %}"
                            >
                                {{ user.username }} {% if user.is_superuser
                                %}(Admin){% else %}(User){% endif %}
                            </span>
                            {% else %}
                            <span class="user-badge guest">Guest</span>
                            {% endif %}
                        </li>
                    </ul>
                </nav>
            </div>
        </header>

        <!-- Messages -->
        {% if messages %}
        <div class="container mt-3" role="status" aria-live="polite">
            {% for message in messages %}
            <div
                class="alert alert-{{ message.tags }} alert-dismissible fade show"
                role="alert"
            >
                {{ message }}
                <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="alert"
                    aria-label="Close"
                ></button>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Main Content -->
        <main class="container">{% block content %}{% endblock %}</main>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
